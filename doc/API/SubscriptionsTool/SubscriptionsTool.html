<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
          "http://www.w3.org/TR/html40/loose.dtd">

<html>
         
  <head>
    <title>Class: SubscriptionsTool</title>
  </head>

  <body bgcolor="#ffffff">

        <p><i><a href="../index.html">Table of Contents</a></i></p>
        
        <table border="0" cellpadding="5" cellspacing="0" width="100%">
        <tr>
            <th rowspan="2"
                valign="top"
                align="left"
                width="10%"
                bgcolor="#88bbee"><font color="#000000">Class: SubscriptionsTool</font>
            </th>
            <th bgcolor="#88bbee"
                width="90%"
                align="right"><font color="#000000">SubscriptionsTool.py</font>
            </th>
        </tr>
        <tr>
        <td>
        
<h3>Subscriptions Tool</h3>
<p>    portal_subcriptions is the central tool with the necessary methods
    to query the subscriptions and execute them.</p>
<p>    The subscriptions are looked up locally in a .cps_subscriptions folder in
    the object.</p>
<table border="0" cellpadding="5" cellspacing="0" width="100%">

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="Base Classes">Base Classes</a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                width="80%"
                >
                <font color="#000000">&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        
UniqueObject<br>
Folder<br>

</td></tr>
</table>
<table border="0" cellpadding="5" cellspacing="0" width="100%">

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="Methods">Methods</a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                width="80%"
                >
                <font color="#000000">&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        

            <table border="0" cellspacing="2" cellpadding="2" width="100%">
              <tr>
            <td align="LEFT" valign="TOP">
<a href="#__init__">__init__</a><br>
<a href="#getAllSubscriptionsFor">getAllSubscriptionsFor</a><br>
<a href="#getContainerPortalTypes">getContainerPortalTypes</a><br>
<a href="#getDefaultMessageBody">getDefaultMessageBody</a><br>
<a href="#getDefaultMessageTitle">getDefaultMessageTitle</a><br>
<a href="#getErrorMessageBody">getErrorMessageBody</a><br>
<a href="#getEventsFromContext">getEventsFromContext</a><br>
<a href="#getExplicitRecipientsRuleId">getExplicitRecipientsRuleId</a><br>
</td>
<td align="LEFT" valign="TOP">
<a href="#getMailNotificationRuleObjectId">getMailNotificationRuleObjectId</a><br>
<a href="#getRecipientsFor">getRecipientsFor</a><br>
<a href="#getRecordedEvents">getRecordedEvents</a><br>
<a href="#getSubscribeConfirmEmailBody">getSubscribeConfirmEmailBody</a><br>
<a href="#getSubscribeConfirmEmailTitle">getSubscribeConfirmEmailTitle</a><br>
<a href="#getSubscribeWelcomeEmailBody">getSubscribeWelcomeEmailBody</a><br>
<a href="#getSubscribeWelcomeEmailTitle">getSubscribeWelcomeEmailTitle</a><br>
<a href="#getSubscriptablePortalTypes">getSubscriptablePortalTypes</a><br>
</td>
<td align="LEFT" valign="TOP">
<a href="#getSubscriptionContainerFromContext">getSubscriptionContainerFromContext</a><br>
<a href="#getSubscriptionContainerId">getSubscriptionContainerId</a><br>
<a href="#getSubscriptionsFor">getSubscriptionsFor</a><br>
<a href="#isSubscriberFor">isSubscriberFor</a><br>
<a href="#manage_addEventType">manage_addEventType</a><br>
<a href="#manage_editDefaultEventMessage">manage_editDefaultEventMessage</a><br>
<a href="#manage_editEventMessage">manage_editEventMessage</a><br>
<a href="#notify_event">notify_event</a><br>
</td>
</tr>
            </table>
            

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="__init__"></a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                width="80%"
                >
                <font color="#000000">__init__&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        <font color="#000088"><pre>
__init__ ( self )

</pre></font>

<p>Initialization of default properties.</p>

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="getAllSubscriptionsFor"></a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                width="80%"
                >
                <font color="#000000">getAllSubscriptionsFor&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        <font color="#000088"><pre>
getAllSubscriptionsFor (
        self,
        email=None,
        context=None,
        )

</pre></font>

<h3>Returns all the subscriptions for a given member/email.</h3>
<p>        Catalog research. getRecipients is indexed for the subscriptions
        container.</p>
<p>        Notice, anonymous user can as well check their subscriptions.</p>

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="getContainerPortalTypes"></a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                width="80%"
                >
                <font color="#000000">getContainerPortalTypes&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        <font color="#000088"><pre>
getContainerPortalTypes ( self )

</pre></font>

<p>Get all portal types in when we can set notifications</p>

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="getDefaultMessageBody"></a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                width="80%"
                >
                <font color="#000000">getDefaultMessageBody&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        <font color="#000088"><pre>
getDefaultMessageBody ( self,  event_id=None )

</pre></font>

<h3>Returns the default event message title</h3>
<p>        If event_id then look for the current title that applied
        to this given event.</p>

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="getDefaultMessageTitle"></a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                width="80%"
                >
                <font color="#000000">getDefaultMessageTitle&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        <font color="#000088"><pre>
getDefaultMessageTitle ( self,  event_id=None )

</pre></font>

<h3>Returns the default event message title.</h3>
<p>        If event_id then look for the current title that applied
        to this given event.</p>

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="getErrorMessageBody"></a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                width="80%"
                >
                <font color="#000000">getErrorMessageBody&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        <font color="#000088"><pre>
getErrorMessageBody ( self,  event_id=None )

</pre></font>

<h3>Returns the error event message title</h3>
<p>        Used especially when the user edited the body of the event
        but put wrong variable names.</p>
<p>        If event_id is specified then let's check if we get a custom
        one.</p>

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="getEventsFromContext"></a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                width="80%"
                >
                <font color="#000000">getEventsFromContext&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        <font color="#000088"><pre>
getEventsFromContext ( self,  context=None )

</pre></font>

<p>Returns events given a context.</p>

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="getExplicitRecipientsRuleId"></a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                width="80%"
                >
                <font color="#000000">getExplicitRecipientsRuleId&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        <font color="#000088"><pre>
getExplicitRecipientsRuleId ( self )

</pre></font>

<h3>Returns an in use id.</h3>
<p>        Id in use for the ExplicitRecipientsRule object</p>

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="getMailNotificationRuleObjectId"></a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                width="80%"
                >
                <font color="#000000">getMailNotificationRuleObjectId&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        <font color="#000088"><pre>
getMailNotificationRuleObjectId ( self )

</pre></font>

<h3>Returns an in use id.</h3>
<p>        Id in use for the MailNoticationRule object.</p>

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="getRecipientsFor"></a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                width="80%"
                >
                <font color="#000000">getRecipientsFor&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        <font color="#000088"><pre>
getRecipientsFor (
        self,
        event_type='',
        object=None,
        infos={},
        )

</pre></font>

<p>Get all the recipients computed from all the subscriptions
        found.<p>        The black list parameter will pass within the infos parameter.</p>
</p>

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="getRecordedEvents"></a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                width="80%"
                >
                <font color="#000000">getRecordedEvents&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        <font color="#000088"><pre>
getRecordedEvents ( self )

</pre></font>

<p>Returns recorded events</p>

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="getSubscribeConfirmEmailBody"></a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                width="80%"
                >
                <font color="#000000">getSubscribeConfirmEmailBody&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        <font color="#000088"><pre>
getSubscribeConfirmEmailBody ( self,  event_id=None )

</pre></font>

<h3>Returns the subcribe confirmation email body</h3>
<p>        If event_id is specified then let's check if we get a custom
        one for the given event.</p>

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="getSubscribeConfirmEmailTitle"></a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                width="80%"
                >
                <font color="#000000">getSubscribeConfirmEmailTitle&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        <font color="#000088"><pre>
getSubscribeConfirmEmailTitle ( self,  event_id=None )

</pre></font>

<h3>Returns the subcribe confirmation email title</h3>
<p>        If event_id is specified then let's check if we get a custom
        one for the given event.</p>

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="getSubscribeWelcomeEmailBody"></a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                width="80%"
                >
                <font color="#000000">getSubscribeWelcomeEmailBody&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        <font color="#000088"><pre>
getSubscribeWelcomeEmailBody ( self,  event_id=None )

</pre></font>

<h3>Returns the subcribe welcome email body</h3>
<p>        If event_id is specified then let's check if we get a custom
        one for the given event.</p>

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="getSubscribeWelcomeEmailTitle"></a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                width="80%"
                >
                <font color="#000000">getSubscribeWelcomeEmailTitle&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        <font color="#000088"><pre>
getSubscribeWelcomeEmailTitle ( self,  event_id=None )

</pre></font>

<h3>Returns the subcribe welcome email title</h3>
<p>        If event_id is specified then let's check if we get a custom
        one for the given event.</p>

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="getSubscriptablePortalTypes"></a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                width="80%"
                >
                <font color="#000000">getSubscriptablePortalTypes&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        <font color="#000088"><pre>
getSubscriptablePortalTypes ( self )

</pre></font>

<p>Returns the possible subscriptable portal types</p>

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="getSubscriptionContainerFromContext"></a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                width="80%"
                >
                <font color="#000000">getSubscriptionContainerFromContext&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        <font color="#000088"><pre>
getSubscriptionContainerFromContext ( self,  context )

</pre></font>

<h3>Returns a subscriptions container id.</h3>
<p>        Lookup to find one through acquisition</p>

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="getSubscriptionContainerId"></a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                width="80%"
                >
                <font color="#000000">getSubscriptionContainerId&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        <font color="#000088"><pre>
getSubscriptionContainerId ( self )

</pre></font>

<h3>Returns the default id for subscription containers</h3>
<p>        .cps_subscriptions by default</p>

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="getSubscriptionsFor"></a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                width="80%"
                >
                <font color="#000000">getSubscriptionsFor&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        <font color="#000088"><pre>
getSubscriptionsFor (
        self,
        event_type,
        object,
        infos=None,
        )

</pre></font>

<h3>Get the subscriptions applicable for this event.</h3>
<p>        Some of the parameters may be None to get all subscriptions.</p>

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="isSubscriberFor"></a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                width="80%"
                >
                <font color="#000000">isSubscriberFor&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        <font color="#000088"><pre>
isSubscriberFor (
        self,
        event_id,
        context,
        email='',
        )

</pre></font>

<p>Is a given member subscriber for a given email in the given context</p>

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="manage_addEventType"></a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                width="80%"
                >
                <font color="#000000">manage_addEventType&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        <font color="#000088"><pre>
manage_addEventType (
        self,
        event_where,
        event_id,
        event_label,
        REQUEST=None,
        )

</pre></font>

<p>Adds a new event id in a given context</p>

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="manage_editDefaultEventMessage"></a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                width="80%"
                >
                <font color="#000000">manage_editDefaultEventMessage&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        <font color="#000088"><pre>
manage_editDefaultEventMessage (
        self,
        event_default_email_title,
        event_default_email_body,
        event_error_email_body,
        subscribe_confirm_email_body,
        subscribe_confirm_email_title,
        subscribe_welcome_email_body,
        subscribe_welcome_email_title,
        REQUEST=None,
        )

</pre></font>

<p>Edit the default event email</p>

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="manage_editEventMessage"></a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                width="80%"
                >
                <font color="#000000">manage_editEventMessage&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        <font color="#000088"><pre>
manage_editEventMessage (
        self,
        event_id,
        event_email_title,
        event_email_body,
        subscribe_confirm_email_body,
        subscribe_confirm_email_title,
        subscribe_welcome_email_body,
        subscribe_welcome_email_title,
        REQUEST=None,
        )

</pre></font>

<p>Edit a custom event message</p>

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="notify_event"></a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                width="80%"
                >
                <font color="#000000">notify_event&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        <font color="#000088"><pre>
notify_event (
        self,
        event_type,
        object,
        infos,
        )

</pre></font>

<h3>Standard event hook.</h3>
<p>        Get the applicable subscriptions. Sends the event to the
        subscriptions.</p>
<p>        For workflow events, infos must contain the additional
        keyword arguments passed to the transition.</p>
</td></tr>
</td></tr>
</table>

        </td>
        </tr>
        </table>

        <hr>

        <p><i><a href="../index.html">Table of Contents</a></i></p>

        <font size="-2"><i>This document was automatically generated
        on Fri Mar  5 19:30:51 2004 by
        <a href="http://happydoc.sourceforge.net">HappyDoc</a> version
        WORKING</i></font>
        
        </body>
        </html>
        